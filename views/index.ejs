<%- include('./partials/header') %>

<div class="mt-3">

  <% if (platos.length) { %>
   
    <div class="table-responsive">
      <table class="table table-striped table-sm">
        <colgroup>
          <col style="width: 5%;">
          <col style="width: 20%;">
          <col style="width: 20%;">
          <col style="width: 10%;">
          <col style="width: 10%;">
          <col style="width: 20%;">
          <col style="width: 15%;">
        </colgroup>
        <thead>
          <tr>
            <th>ID</th>
            <th>Categoria</th>
            <th>Nombre</th>
            <th>Precio</th>
            <th>Delivery</th>
            <th>Descripcion</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <% platos.forEach(plato => { %>
          <tr>
            <td><%= plato.idplato %></td>
            <td><%= plato.categoria %></td>
            <td><%= plato.nombre %></td>
            <td><%= plato.precio %></td>
            <td><%= plato.delivery %></td>
            <td><%= plato.descripcion %></td>
            <td>
              <a href="/delete/<%= plato.idplato %>" class=" delete btn btn-sm btn-danger">Eliminar</a>
              <a href="/edit/<%= plato.idplato %>" class="btn btn-sm btn-info">Editar</a>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  <% } else { %>

    <div class="alert alert-warning">
      <strong>No hay registrados</strong>
    </div>
  <% } %>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const listaEnlaces = document.querySelectorAll(".delete")

    listaEnlaces.forEach(enlace =>{
      enlace.addEventListener("click", (event) => {
        event.preventDefault();

        Swal.fire({
          title: 'Restaurant',
          text: '¿Estas seguro de proceder?',
          icon: 'question',
          footer: 'Ingenieria de Software IA',
          confirmButtonText: 'Aceptar',
          confirmButtonColor: '#2980b9',
          showCancelButton: true,
          cancelButtonText: 'Cancelar',
          cancelButtonColor: '#bdc3c7'
        }).then((result) => {
          if(result.isConfirmed){
            //window = pestaña actual de tu navegador
            window.location.href = event.target.getAttribute("href")
          }
        })
      })
    })
  })
</script>

<%- include('./partials/footer') %>
